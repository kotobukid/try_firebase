import{d as l,o,c as u,a as e,t as f,p as w,b as k,_ as p,i as I,r as h,e as A,f as S,G as x,s as O,g as C,w as N,u as r,h as b,j as d,k as $,F as B}from"./index-Ct0IAmuI.js";const v=s=>(w("data-v-dda4045b"),s=s(),k(),s),F={class:"user_info",style:{width:"600px"}},G=v(()=>e("colgroup",null,[e("col",{style:{width:"200px"}}),e("col",{style:{width:"400px"}})],-1)),D=v(()=>e("th",null,"email",-1)),T=v(()=>e("th",null,"displayName",-1)),U=v(()=>e("th",null,"photo",-1)),V=["src"],W=l({__name:"UserDetail",props:{user:{}},setup(s){return(t,a)=>(o(),u("table",F,[G,e("tbody",null,[e("tr",null,[D,e("td",null,f(t.user.email),1)]),e("tr",null,[T,e("td",null,f(t.user.displayName),1)]),e("tr",null,[U,e("td",null,[e("img",{class:"avatar",src:t.user.photoURL},null,8,V)])])])]))}}),j=p(W,[["__scopeId","data-v-dda4045b"]]),y=()=>{const s=I("auth"),t=h(null);A(s,n=>{n?t.value=n:t.value=null});const a=h(!1),c=async()=>{a.value=!0;try{const n=new x,_=await O(s,n),ce=await _.user.getIdToken();t.value=_.user,a.value=!1}catch(n){console.error("Authentication Error: ",n),a.value=!1}};return{user:S(()=>t.value),signInWithGoogle:c,signOut:async()=>{t.value?await C(s):alert("ログインしていません")},login_processing:a}},m=s=>(w("data-v-48bc54ad"),s=s(),k(),s),E={class:"firebaseAuth"},L=m(()=>e("h1",null,"Firebase Authentication",-1)),P={key:0},q={key:1},H={key:0},R={class:"already_authenticated"},Y=m(()=>e("span",{class:"message"},"you are authenticated.",-1)),z={key:2,class:"login_required.not"},J=m(()=>e("span",{class:"message not"},"You are not authenticated.",-1)),K=m(()=>e("br",null,null,-1)),M=l({__name:"FirebaseAuth",setup(s){const t=h(!1),{signInWithGoogle:a,user:c,login_processing:g}=y();return N(c,(i,n)=>{i?t.value=!0:t.value=!1}),(i,n)=>(o(),u("div",E,[L,r(g)?(o(),u("div",P,"認証処理中(非同期)")):b("",!0),r(c)?(o(),u("div",q,[t.value?(o(),u("div",H,[e("div",R,[Y,d(j,{user:r(c)},null,8,["user"])])])):b("",!0)])):(o(),u("div",z,[J,K,e("button",{onClick:n[0]||(n[0]=(..._)=>r(a)&&r(a)(..._))},"Login with Google")]))]))}}),Q=p(M,[["__scopeId","data-v-48bc54ad"]]),X={key:0},Z={class:"name"},ee={key:1},te=l({__name:"AnotherComponent",setup(s){const{user:t}=y();return(a,c)=>r(t)?(o(),u("span",X,[$(" your name is "),e("span",Z,f(r(t).displayName),1),$(" .")])):(o(),u("span",ee,"your are not authenticated."))}}),se=p(te,[["__scopeId","data-v-5ba0e741"]]),ae=["disabled"],ne=l({__name:"SignOutButton",setup(s){const{signOut:t}=y(),a=h(!1),c=async()=>{a.value||(a.value=!0,await t(),a.value=!1)};return(g,i)=>(o(),u("button",{disabled:a.value,onClick:c},"ログアウト",8,ae))}}),oe=p(ne,[["__scopeId","data-v-39131ee2"]]),le=l({__name:"TestAuth",setup(s){return(t,a)=>(o(),u(B,null,[d(Q),d(se),d(oe)],64))}});export{le as default};
